# GeoIp Search

### Системные требования
- PHP >= 8.0
- composer

### Чтобы проект заработал
- Установить ```sprint.migration``` (https://marketplace.1c-bitrix.ru/solutions/sprint.migration/)
- Выполнить ```composer install```
- Применить миграции

### Описание
Форма GeoIP поиска на Vue.js. Поиск осуществляется с помощью запроса в публичный веб-сервис (https://sypexgeo.net/, http://ip-api.com/, https://ipdata.co/).
Поддерживаются все три сервиса. Переключение между сервисами реализовано хардкодом в классе ```local/classes/Vendor/GeoIP/GeoIpHelper.php```: раскомментировать переменную с нужным сервисом в методе ```getGeoIPService```

### Сценарий
- Пользователь вводит валидный IP, 
- Отправляется запрос в HL блок: 
  - Если в HL блоке присутствует запись с данным IP, то данные отображаются из базы. 
  - Если в базе нет нужного ip, то запрос отправляется на один из сервисов, пользователю показываются данные из сервиса и записываются в базу.

## Требования
- Оформить в виде компонента Битрикс, используя D7;
- Использовать стандартный http или soap клиент Битрикс;
- Создание HL блока реализовать через миграцию (https://marketplace.1c-bitrix.ru/solutions/sprint.migration/);
- Валидация должна присутствовать как минимум на серверной стороне;
- Обработка ошибок и исключений;
- Оформить страницу презентабельно (можно использовать инструменты типа Bootstrap);
- Выполнить задание, используя ajax-запросы;
- Производить комментирование кода.

## Будет плюсом
- Использовать Vue js;
- В случае возникновения исключений отправлять на почту сообщение с данными об ошибке, используя инструменты Битрикс.